import{t as I,g as re,a as oe,d as ae}from"./chunk-IkkChTs_.js";import{o as se,c as ce}from"../entries/pages_index.BzUf7jGH.js";/* empty css              */import"./chunk-TFZMFoSA.js";/* empty css              */var S,O,Vt,W,at,Ut=-1,M=function(e){addEventListener("pageshow",function(t){t.persisted&&(Ut=t.timeStamp,e(t))},!0)},st=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Q=function(){var e=st();return e&&e.activationStart||0},g=function(e,t){var n=st(),i="navigate";return Ut>=0?i="back-forward-cache":n&&(document.prerendering||Q()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},D=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(r){Promise.resolve().then(function(){t(r.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch{}},T=function(e,t,n,i){var r,o;return function(s){t.value>=0&&(s||i)&&((o=t.value-(r||0))||r===void 0)&&(r=t.value,t.delta=o,t.rating=function(a,c){return a>c[1]?"poor":a>c[0]?"needs-improvement":"good"}(t.value,n),e(t))}},ct=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},J=function(e){var t=function(n){n.type!=="pagehide"&&document.visibilityState!=="hidden"||e(n)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},ut=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},k=-1,Tt=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},z=function(e){document.visibilityState==="hidden"&&k>-1&&(k=e.type==="visibilitychange"?e.timeStamp:0,ue())},yt=function(){addEventListener("visibilitychange",z,!0),addEventListener("prerenderingchange",z,!0)},ue=function(){removeEventListener("visibilitychange",z,!0),removeEventListener("prerenderingchange",z,!0)},lt=function(){return k<0&&(k=Tt(),yt(),M(function(){setTimeout(function(){k=Tt(),yt()},0)})),{get firstHiddenTime(){return k}}},U=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},Et=[1800,3e3],Ht=function(e,t){t=t||{},U(function(){var n,i=lt(),r=g("FCP"),o=D("paint",function(s){s.forEach(function(a){a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<i.firstHiddenTime&&(r.value=Math.max(a.startTime-Q(),0),r.entries.push(a),n(!0)))})});o&&(n=T(e,r,Et,t.reportAllChanges),M(function(s){r=g("FCP"),n=T(e,r,Et,t.reportAllChanges),ct(function(){r.value=performance.now()-s.timeStamp,n(!0)})}))})},wt=[.1,.25],le=function(e,t){t=t||{},Ht(ut(function(){var n,i=g("CLS",0),r=0,o=[],s=function(c){c.forEach(function(u){if(!u.hadRecentInput){var l=o[0],f=o[o.length-1];r&&u.startTime-f.startTime<1e3&&u.startTime-l.startTime<5e3?(r+=u.value,o.push(u)):(r=u.value,o=[u])}}),r>i.value&&(i.value=r,i.entries=o,n())},a=D("layout-shift",s);a&&(n=T(e,i,wt,t.reportAllChanges),J(function(){s(a.takeRecords()),n(!0)}),M(function(){r=0,i=g("CLS",0),n=T(e,i,wt,t.reportAllChanges),ct(function(){return n()})}),setTimeout(n,0))}))},F={passive:!0,capture:!0},de=new Date,bt=function(e,t){S||(S=t,O=e,Vt=new Date,Gt(removeEventListener),qt())},qt=function(){if(O>=0&&O<Vt-de){var e={entryType:"first-input",name:S.type,target:S.target,cancelable:S.cancelable,startTime:S.timeStamp,processingStart:S.timeStamp+O};W.forEach(function(t){t(e)}),W=[]}},fe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,i){var r=function(){bt(n,i),s()},o=function(){s()},s=function(){removeEventListener("pointerup",r,F),removeEventListener("pointercancel",o,F)};addEventListener("pointerup",r,F),addEventListener("pointercancel",o,F)}(t,e):bt(t,e)}},Gt=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,fe,F)})},St=[100,300],me=function(e,t){t=t||{},U(function(){var n,i=lt(),r=g("FID"),o=function(c){c.startTime<i.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),n(!0))},s=function(c){c.forEach(o)},a=D("first-input",s);n=T(e,r,St,t.reportAllChanges),a&&J(ut(function(){s(a.takeRecords()),a.disconnect()})),a&&M(function(){var c;r=g("FID"),n=T(e,r,St,t.reportAllChanges),W=[],O=-1,S=null,Gt(addEventListener),c=o,W.push(c),qt()})})},jt=0,nt=1/0,j=0,pe=function(e){e.forEach(function(t){t.interactionId&&(nt=Math.min(nt,t.interactionId),j=Math.max(j,t.interactionId),jt=j?(j-nt)/7+1:0)})},Wt=function(){return at?jt:performance.interactionCount||0},he=function(){"interactionCount"in performance||at||(at=D("event",pe,{type:"event",buffered:!0,durationThreshold:0}))},Ct=[200,500],zt=0,At=function(){return Wt()-zt},w=[],it={},Lt=function(e){var t=w[w.length-1],n=it[e.interactionId];if(n||w.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};it[i.id]=i,w.push(i)}w.sort(function(r,o){return o.latency-r.latency}),w.splice(10).forEach(function(r){delete it[r.id]})}},ve=function(e,t){t=t||{},U(function(){var n;he();var i,r=g("INP"),o=function(a){a.forEach(function(l){l.interactionId&&Lt(l),l.entryType==="first-input"&&!w.some(function(f){return f.entries.some(function(y){return l.duration===y.duration&&l.startTime===y.startTime})})&&Lt(l)});var c,u=(c=Math.min(w.length-1,Math.floor(At()/50)),w[c]);u&&u.latency!==r.value&&(r.value=u.latency,r.entries=u.entries,i())},s=D("event",o,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});i=T(e,r,Ct,t.reportAllChanges),s&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&s.observe({type:"first-input",buffered:!0}),J(function(){o(s.takeRecords()),r.value<0&&At()>0&&(r.value=0,r.entries=[]),i(!0)}),M(function(){w=[],zt=Wt(),r=g("INP"),i=T(e,r,Ct,t.reportAllChanges)}))})},Pt=[2500,4e3],rt={},ge=function(e,t){t=t||{},U(function(){var n,i=lt(),r=g("LCP"),o=function(c){var u=c[c.length-1];u&&u.startTime<i.firstHiddenTime&&(r.value=Math.max(u.startTime-Q(),0),r.entries=[u],n())},s=D("largest-contentful-paint",o);if(s){n=T(e,r,Pt,t.reportAllChanges);var a=ut(function(){rt[r.id]||(o(s.takeRecords()),s.disconnect(),rt[r.id]=!0,n(!0))});["keydown","click"].forEach(function(c){addEventListener(c,function(){return setTimeout(a,0)},!0)}),J(a),M(function(c){r=g("LCP"),n=T(e,r,Pt,t.reportAllChanges),ct(function(){r.value=performance.now()-c.timeStamp,rt[r.id]=!0,n(!0)})})}})},It=[800,1800],Te=function e(t){document.prerendering?U(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},ye=function(e,t){t=t||{};var n=g("TTFB"),i=T(e,n,It,t.reportAllChanges);Te(function(){var r=st();if(r){var o=r.responseStart;if(o<=0||o>performance.now())return;n.value=Math.max(o-Q(),0),n.entries=[r],i(!0),M(function(){n=g("TTFB",0),(i=T(e,n,It,t.reportAllChanges))(!0)})}})};function Xt(e){const t=new RegExp(`(?:^| )${e}=([^;]+)`),n=document.cookie&&document.cookie.match(t);return n?n[1]:null}const Ee=()=>Xt("FTSession_PubLib");function we(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return{layout:se.getCurrentLayout(),orientation:ce.getOrientation(),connectionType:e?e.type:void 0,ft_session_publib:Ee()}}function be(e=window.location.search){const t={},n=["segmentid","cpccampaign"],i=new URLSearchParams(e);return n.forEach(r=>{const o=i.get(r);o&&(t[r]=o)}),t}function Se(e=window.location.search){const t=new URLSearchParams(e),n=t.get("nextErrorStatus"),i=t.get("nextErrorReason");if(n||i)return{errorStatus:n,errorReason:i,url:window.parent.location.toString(),referrer:window.parent.document.referrer}}function Ce(e){const t={};return e.split(",").map(n=>{const[i,r]=n.split(":");i&&r&&(t[i]=r)}),t}const Ae={appName:"app",contentId:"rootContentId",contentType:"rootContentType",conceptId:"rootConceptId",conceptType:"rootConceptType",segmentid:"marketing_segment_id",cpccampaign:"cpc_campaign",abTestState:"active_ammit_flags"};function Le(e){const t={};return Object.keys(e).forEach(n=>{let i=e[n];n==="abTestState"&&(i=Ce(i)),n==="contentId"&&(t.content={...t.content,uuid:i}),n==="contentType"&&(t.content={...t.content,asset_type:i}),t[Ae[n]||n]=i}),t}async function Pe(){const e=(await re()).isAllowed(),t=oe();return{...e,usprivacy:t}}function V(e,t,n=!0){const i=Element.prototype.isPrototypeOf(this)?this:document.body,r=new CustomEvent(e,{bubbles:n,cancelable:!0,detail:t});i.dispatchEvent(r)}var Mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ie(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Kt=Ie(function(e){var t=256,n=6,i=52,r=[],o=typeof Mt>"u"?window:Mt,s=Math.pow(t,n),a=Math.pow(2,i),c=a*2,u=t-1,l=Math.random;e.exports=function(m,p){if(p&&p.global===!0)return p.global=!1,Math.random=e.exports(m,p),p.global=!0,Math.random;var v=p&&p.entropy||!1,h=[];P(y(v?[m,N(r)]:0 in arguments?m:ie(),3),h);var d=new f(h);return P(N(d.S),r),function(){for(var E=d.g(n),b=s,x=0;E<a;)E=(E+x)*t,b*=t,x=d.g(1);for(;E>=c;)E/=2,b/=2,x>>>=1;return(E+x)/b}},e.exports.resetGlobal=function(){Math.random=l};function f(m){var p,v=m.length,h=this,d=0,E=h.i=h.j=0,b=h.S=[];for(v||(m=[v++]);d<t;)b[d]=d++;for(d=0;d<t;d++)b[d]=b[E=u&E+m[d%v]+(p=b[d])],b[E]=p;(h.g=function(x){for(var tt,et=0,q=h.i,G=h.j,_=h.S;x--;)tt=_[q=u&q+1],et=et*t+_[u&(_[q]=_[G=u&G+tt])+(_[G]=tt)];return h.i=q,h.j=G,et})(t)}function y(m,p){var v=[],h=(typeof m)[0],d;if(p&&h=="o")for(d in m)try{v.push(y(m[d],p-1))}catch{}return v.length?v:h=="s"?m:m+"\0"}function P(m,p){for(var v=m+"",h,d=0;d<v.length;)p[u&d]=u&(h^=p[u&d]*19)+v.charCodeAt(d++);return N(p)}function ie(m){try{return o.crypto.getRandomValues(m=new Uint8Array(t)),N(m)}catch{return[+new Date,o,o.navigator&&o.navigator.plugins,o.screen,N(r)]}}function N(m){return String.fromCharCode.apply(0,m)}P(Math.random(),r)});Kt.resetGlobal;function Qt(e,t){const i=Kt(e)();return Math.round(i*100)<=t}const Jt=()=>Xt("spoor-id"),Me=["domInteractive","domComplete","timeToFirstByte","largestContentfulPaint","firstInputDelay","cumulativeLayoutShift","firstContentfulPaint","interactionToNextPaint"],xe=10,ke=e=>Me.every(t=>typeof e[t]=="number"),$e=({sampleRate:e}={})=>{if(!1 in window)return;const t=Jt();if(e=Number.isFinite(e)&&e<=100&&e>=0?e:xe,!Qt(t,e))return;const n=performance.getEntriesByType("navigation")&&performance.getEntriesByType("navigation")[0];if(!n||n.type!=="navigate")return;const i={};ae.complete.then(()=>{i.domInteractive=Math.round(n.domInteractive),i.domComplete=Math.round(n.domComplete)});let r=!1;const o=s=>{if(r)return;const a=s.name.toLowerCase(),c=s.value;a==="fid"?i.firstInputDelay=Math.round(c):a==="lcp"?i.largestContentfulPaint=Math.round(c):a==="ttfb"?i.timeToFirstByte=Math.round(c):a==="fcp"?i.firstContentfulPaint=Math.round(c):a==="cls"?i.cumulativeLayoutShift=Number(c.toFixed(4)):a==="inp"&&(i.interactionToNextPaint=Math.round(c)),i.url=window.document.location.href||null,ke(i)&&(console.log({performanceMetrics:i}),V("oTracking.event",{action:"performance",category:"page",...i}),r=!0)};le(o,{reportAllChanges:!0}),Ht(o),me(o),ge(o),ye(o),ve(o)};var C,B,Yt,X,Y=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Zt=function(e){if(document.readyState==="loading")return"loading";var t=Y();if(t){if(e<t.domInteractive)return"loading";if(t.domContentLoadedEventStart===0||e<t.domContentLoadedEventStart)return"dom-interactive";if(t.domComplete===0||e<t.domComplete)return"dom-content-loaded"}return"complete"},De=function(e){var t=e.nodeName;return e.nodeType===1?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},dt=function(e,t){var n="";try{for(;e&&e.nodeType!==9;){var i=e,r=i.id?"#"+i.id:De(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+r.length>(t||100)-1)return n||r;if(n=n?r+">"+n:r,i.id)break;e=i.parentNode}}catch{}return n},te=-1,Ne=function(){return te},H=function(e){addEventListener("pageshow",function(t){t.persisted&&(te=t.timeStamp,e(t))},!0)},ft=function(){var e=Y();return e&&e.activationStart||0},A=function(e,t){var n=Y(),i="navigate";return Ne()>=0?i="back-forward-cache":n&&(document.prerendering||ft()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},Z=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(r){Promise.resolve().then(function(){t(r.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch{}},L=function(e,t,n,i){var r,o;return function(s){t.value>=0&&(s||i)&&((o=t.value-(r||0))||r===void 0)&&(r=t.value,t.delta=o,t.rating=function(a,c){return a>c[1]?"poor":a>c[0]?"needs-improvement":"good"}(t.value,n),e(t))}},mt=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},pt=function(e){var t=function(n){n.type!=="pagehide"&&document.visibilityState!=="hidden"||e(n)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},ht=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},$=-1,xt=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},K=function(e){document.visibilityState==="hidden"&&$>-1&&($=e.type==="visibilitychange"?e.timeStamp:0,_e())},kt=function(){addEventListener("visibilitychange",K,!0),addEventListener("prerenderingchange",K,!0)},_e=function(){removeEventListener("visibilitychange",K,!0),removeEventListener("prerenderingchange",K,!0)},vt=function(){return $<0&&($=xt(),kt(),H(function(){setTimeout(function(){$=xt(),kt()},0)})),{get firstHiddenTime(){return $}}},gt=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},$t=[1800,3e3],Fe=function(e,t){t=t||{},gt(function(){var n,i=vt(),r=A("FCP"),o=Z("paint",function(s){s.forEach(function(a){a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<i.firstHiddenTime&&(r.value=Math.max(a.startTime-ft(),0),r.entries.push(a),n(!0)))})});o&&(n=L(e,r,$t,t.reportAllChanges),H(function(s){r=A("FCP"),n=L(e,r,$t,t.reportAllChanges),mt(function(){r.value=performance.now()-s.timeStamp,n(!0)})}))})},Dt=[.1,.25],Re=function(e,t){(function(n,i){i=i||{},Fe(ht(function(){var r,o=A("CLS",0),s=0,a=[],c=function(l){l.forEach(function(f){if(!f.hadRecentInput){var y=a[0],P=a[a.length-1];s&&f.startTime-P.startTime<1e3&&f.startTime-y.startTime<5e3?(s+=f.value,a.push(f)):(s=f.value,a=[f])}}),s>o.value&&(o.value=s,o.entries=a,r())},u=Z("layout-shift",c);u&&(r=L(n,o,Dt,i.reportAllChanges),pt(function(){c(u.takeRecords()),r(!0)}),H(function(){s=0,o=A("CLS",0),r=L(n,o,Dt,i.reportAllChanges),mt(function(){return r()})}),setTimeout(r,0))}))})(function(n){(function(i){if(i.entries.length){var r=i.entries.reduce(function(a,c){return a&&a.value>c.value?a:c});if(r&&r.sources&&r.sources.length){var o=(s=r.sources).find(function(a){return a.node&&a.node.nodeType===1})||s[0];if(o)return void(i.attribution={largestShiftTarget:dt(o.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:o,largestShiftEntry:r,loadState:Zt(r.startTime)})}}var s;i.attribution={}})(n),e(n)},t)},R={passive:!0,capture:!0},Oe=new Date,Nt=function(e,t){C||(C=t,B=e,Yt=new Date,ne(removeEventListener),ee())},ee=function(){if(B>=0&&B<Yt-Oe){var e={entryType:"first-input",name:C.type,target:C.target,cancelable:C.cancelable,startTime:C.timeStamp,processingStart:C.timeStamp+B};X.forEach(function(t){t(e)}),X=[]}},Be=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,i){var r=function(){Nt(n,i),s()},o=function(){s()},s=function(){removeEventListener("pointerup",r,R),removeEventListener("pointercancel",o,R)};addEventListener("pointerup",r,R),addEventListener("pointercancel",o,R)}(t,e):Nt(t,e)}},ne=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Be,R)})},_t=[100,300],Ve=function(e,t){t=t||{},gt(function(){var n,i=vt(),r=A("FID"),o=function(c){c.startTime<i.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),n(!0))},s=function(c){c.forEach(o)},a=Z("first-input",s);n=L(e,r,_t,t.reportAllChanges),a&&pt(ht(function(){s(a.takeRecords()),a.disconnect()})),a&&H(function(){var c;r=A("FID"),n=L(e,r,_t,t.reportAllChanges),X=[],B=-1,C=null,ne(addEventListener),c=o,X.push(c),ee()})})},Ue=function(e,t){Ve(function(n){(function(i){var r=i.entries[0];i.attribution={eventTarget:dt(r.target),eventType:r.name,eventTime:r.startTime,eventEntry:r,loadState:Zt(r.startTime)}})(n),e(n)},t)},Ft=[2500,4e3],ot={},He=function(e,t){(function(n,i){i=i||{},gt(function(){var r,o=vt(),s=A("LCP"),a=function(l){var f=l[l.length-1];f&&f.startTime<o.firstHiddenTime&&(s.value=Math.max(f.startTime-ft(),0),s.entries=[f],r())},c=Z("largest-contentful-paint",a);if(c){r=L(n,s,Ft,i.reportAllChanges);var u=ht(function(){ot[s.id]||(a(c.takeRecords()),c.disconnect(),ot[s.id]=!0,r(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return setTimeout(u,0)},!0)}),pt(u),H(function(l){s=A("LCP"),r=L(n,s,Ft,i.reportAllChanges),mt(function(){s.value=performance.now()-l.timeStamp,ot[s.id]=!0,r(!0)})})}})})(function(n){(function(i){if(i.entries.length){var r=Y();if(r){var o=r.activationStart||0,s=i.entries[i.entries.length-1],a=s.url&&performance.getEntriesByType("resource").filter(function(P){return P.name===s.url})[0],c=Math.max(0,r.responseStart-o),u=Math.max(c,a?(a.requestStart||a.startTime)-o:0),l=Math.max(u,a?a.responseEnd-o:0),f=Math.max(l,s?s.startTime-o:0),y={element:dt(s.element),timeToFirstByte:c,resourceLoadDelay:u-c,resourceLoadTime:l-u,elementRenderDelay:f-l,navigationEntry:r,lcpEntry:s};return s.url&&(y.url=s.url),a&&(y.lcpResourceEntry=a),void(i.attribution=y)}}i.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:i.value}})(n),e(n)},t)};const qe=1,Ge=e=>{if(e.name==="LCP")return{name:e.name,lcp:e.value,lcpDelta:e.delta,element:e.attribution.largestShiftTarget};if(e.name==="FID")return{name:e.name,fid:e.value,fidDelta:e.delta,element:e.attribution.eventTarget};if(e.name==="CLS")return{name:e.name,cls:e.value,clsDelta:e.delta,element:e.attribution.largestShiftTarget}},je=({sampleRate:e}={})=>{const t=o=>{V("oTracking.event",{action:"performance-attribution",category:"page",...Ge(o)})};if(!1 in window)return;const n=Jt();if(!Qt(n,e||qe))return;const r=performance.getEntriesByType("navigation")&&performance.getEntriesByType("navigation")[0];!r||r.type!=="navigate"||(Re(t,{reportAllChanges:!0}),Ue(t),He(t))},We=[25,50,75,100],ze={onScroll:()=>{},target:"body",debug:!1};class Xe{constructor(t){this.options={...ze,...t},this.init()}init(){const t=document.querySelector(this.options.target);t&&"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(this.handleIntersection.bind(this)),t.style.position="relative",We.forEach(n=>{const i=document.createElement("div");i.className="n-tracking-scroll-depth-marker",i.style.position="absolute",i.style.top=`${n}%`,i.style.bottom="0",i.style.width="100%",i.style.zIndex="-1",i.setAttribute("data-scroll-depth",n),t.appendChild(i),this.observer.observe(i)}))}handleIntersection(t){t.forEach(n=>{if(n.isIntersecting||n.intersectionRatio>0){const i=n.target,r=i.getAttribute("data-scroll-depth");this.options.onScroll(r),this.options.debug&&console.log("ScrollDepth",{marker:r}),i.parentNode&&i.parentNode.removeChild(i),this.observer.unobserve(i)}})}}const Rt=15e3,Ke=["load","click","focus","scroll","mousemove","touchstart","touchend","touchcancel","touchleave"],Qe=["blur"],Je=["beforeunload","unload","pagehide"],Ye={onExit:()=>{},debug:!1};class Ze{constructor(t){this.options={...Ye,...t},this.totalAttentionTime=0,this.hasExited=!1,this.init()}init(){Ke.forEach(n=>{window.addEventListener(n,this.startAttention.bind(this))}),Qe.forEach(n=>{window.addEventListener(n,this.endAttention.bind(this))}),Je.forEach(n=>{window.addEventListener(n,this.handleExit.bind(this))}),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),document.querySelectorAll("video").forEach(n=>{n.addEventListener("playing",this.startConstantAttention.bind(this)),n.addEventListener("pause",this.endConstantAttention.bind(this)),n.addEventListener("ended",this.endConstantAttention.bind(this))})}startAttention(t){clearTimeout(this.attentionTimeout),this.startAttentionTime||(this.startAttentionTime=Date.now()),this.attentionTimeout=setTimeout(this.endAttention.bind(this,{type:"timeout"}),Rt),this.options.debug&&console.log("AttentionTime start",{event:t.type})}endAttention(t){this.startAttentionTime&&(clearTimeout(this.attentionTimeout),this.totalAttentionTime=this.getAttentionTime(),this.startAttentionTime=null),this.options.debug&&console.log("AttentionTime end",{event:t.type,time:this.totalAttentionTime})}startConstantAttention(){this.constantAttentionInterval=setInterval(this.startAttention.bind(this),Rt)}endConstantAttention(t){this.endAttention(t),clearInterval(this.constantAttentionInterval)}getAttentionTime(){let t=0;return this.startAttentionTime&&(t=Math.round((Date.now()-this.startAttentionTime)/1e3)),this.totalAttentionTime+t}handleVisibilityChange(t){document.visibilityState==="hidden"?this.endAttention(t):this.startAttention(t)}handleExit(t){this.hasExited||(this.endAttention(t),this.options.debug&&console.log("AttentionTime",{event:t.type,time:this.totalAttentionTime}),this.options.onExit(this.totalAttentionTime),this.hasExited=!0)}}const tn=(e={})=>{const t=r=>{V("oTracking.event",{category:"page",action:"interaction",context:{attention:{total:r}}})},n=new Ze({...e,onExit:t}),i=r=>{V("oTracking.event",{category:"page",action:"scrolldepth",meta:{percentagesViewed:r,attention:n.getAttentionTime()}})};new Xe({...e,onScroll:i})},Ot=100,Bt=" â€¦ ";var en=e=>{if(e.length>Ot){const t=Ot-Bt.length,n=Math.floor(t/2),i=Math.ceil(t/2);return e.substr(0,n)+Bt+e.substr(i*-1)}else return e};const nn=()=>{document.addEventListener("copy",e=>{const t={nodeName:e.target.nodeName.toLowerCase()};if(window.getSelection){const n=window.getSelection().toString().trim();t.characters=n.length,t.words=n.split(/\s+/).length,t.selection=en(n)}V("oTracking.event",{action:"copy",category:"text",context:t})})};var ln=Object.freeze({__proto__:null,realUserMonitoringForPerformance:$e,realUserMonitoringWithAttribution:je,pageAttention:tn,textCopying:nn});const rn="https://spoor-api.ft.com/ingest";function dn({appContext:e,extraContext:t,pageViewContext:n}){const i=be(),r={server:rn,context:Le({...i,...e,...t}),user:we(),useSendBeacon:!0};if(I.init(r),window===window.top||window.location.hostname==="errors-next.ft.com"){const s={...Se(),...n};Pe().then(a=>{I.page({...s,consents:a})}).catch(a=>{console.warn("Could not get consent data",a),I.page(s)})}return I.click.init("cta"),window.oTracking?console.warn("An oTracking instance already exists on window, skipping",{currentInstance:window.oTracking,ourInstance:I}):window.oTracking=I,I}export{rn as SPOOR_API_INGEST_URL,V as broadcast,dn as init,ln as trackers};
