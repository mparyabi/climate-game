<!DOCTYPE html>
<html
  class="core"
  data-build-time="2025-06-26T12:20:33.454Z"
  data-content-id="4251bdfa-c1b9-48fa-b724-8d2229e18f5f"
  lang="en"
>
  <head>
    <link
      rel="stylesheet"
      type="text/css"
      href="/assets/static/index.CWZus6Bk.css"
    />

    <link rel="stylesheet" href="/assets/css/styles.css" />

    <link
      rel="stylesheet"
      type="text/css"
      href="/assets/static/vike-react-b64a028b.BcWtY8Ol.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/assets/static/-financial-times-e4cbeb1c.Bc7zethV.css"
    />
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>The Climate Game — Can you reach net zero?</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Abrand-ft-logo-square-coloured?source=ig-projects"
    />
    <link
      rel="alternate icon"
      type="image/png"
      href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Abrand-ft-logo-square-coloured?source=ig-projects&amp;width=32&amp;height=32&amp;format=png"
      sizes="32x32"
    />
    <link
      rel="alternate icon"
      type="image/png"
      href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Abrand-ft-logo-square-coloured?source=ig-projects&amp;width=194&amp;height=194&amp;format=png"
      sizes="194x194"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Abrand-ft-logo-square-coloured?source=ig-projects&amp;width=180&amp;height=180&amp;format=png"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta name="robots" content="index,follow" />
    <meta name="copyright" content="Financial Times" />
    <meta name="theme-color" content="#fff1e5" />
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "name": "Financial Times",
        "alternateName": "FT.com",
        "url": "http://www.ft.com"
      }
    </script>
    <script type="text/javascript">
      window.cutsTheMustard =
        "querySelector" in document &&
        "localStorage" in window &&
        "addEventListener" in window &&
        typeof Function.prototype.bind !== "undefined";

      if (window.cutsTheMustard)
        document.documentElement.className =
          document.documentElement.className.replace(/core/g, "enhanced");
    </script>
    <link rel="preconnect" href="https://spoor-api.ft.com" />
    <meta property="ft.track:is_live" content="true" />
    <meta
      name="twitter:title"
      content="The Climate Game — Can you reach net zero?"
    />
    <meta
      property="og:title"
      content="The Climate Game — Can you reach net zero?"
    />
    <meta
      name="description"
      content="See if you can save the planet from the worst effects of climate change"
    />
    <meta
      name="twitter:description"
      content="See if you can save the planet from the worst effects of climate change"
    />
    <meta
      property="og:description"
      content="See if you can save the planet from the worst effects of climate change"
    />
    <link rel="canonical" href="/climate-game" />
    <meta name="twitter:url" content="/climate-game" />
    <meta property="og:url" content="/climate-game" />
    <link
      rel="image_src"
      href="https://www.ft.com/__origami/service/image/v2/images/raw/http%3A%2F%2Fft-ig-images-prod.s3-website-eu-west-1.amazonaws.com%2Fv1%2F8354385467-illj2.png?source=ig"
    />
    <meta
      name="twitter:image"
      content="https://www.ft.com/__origami/service/image/v2/images/raw/http%3A%2F%2Fft-ig-images-prod.s3-website-eu-west-1.amazonaws.com%2Fv1%2F8354385467-illj2.png?source=ig"
    />
    <meta
      property="og:image"
      content="https://www.ft.com/__origami/service/image/v2/images/raw/http%3A%2F%2Fft-ig-images-prod.s3-website-eu-west-1.amazonaws.com%2Fv1%2F8354385467-illj2.png?source=ig"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@FT" />
    <meta property="fb:pages" content="8860325749" />
    <meta property="fb:pages" content="121862597867466" />
    <meta property="fb:pages" content="622419751233155" />
    <meta property="fb:pages" content="23117544640" />
    <meta property="fb:pages" content="293710391064899" />
  </head>
  <body>
    <div id="root">
      <div id="wrapper">
        <noscript data-o-component="o-tracking"
          ><img
            src="https://spoor-api.ft.com/px.gif?data=%7B%22action%22%3A%22view%22%2C%22category%22%3A%22page%22%2C%22context%22%3A%7B%22content%22%3A%7B%22asset_type%22%3A%22interactive%22%7D%2C%22product%22%3A%22IG%22%7D%2C%22system%22%3A%7B%22is_live%22%3Afalse%2C%22apiKey%22%3A%22qUb9maKfKbtpRsdp0p2J7uWxRPGJEP%22%2C%22source%22%3A%22o-tracking-ns%22%2C%22version%22%3A%221.0.0%22%7D%7D"
            height="1"
            width="1"
        /></noscript>
        <script>
          var spoorCookie = /spoor-id=([^;]+)/.exec(document.cookie);
          var spoorId =
            (spoorCookie && spoorCookie[1]) || "cj5y2utdx00003i5z6l6po8c1";
          var endpoint =
            "https://4235225.fls.doubleclick.net/activityi;src=4235225;type=homeo886;cat=ft-ne000;u10=" +
            spoorId +
            ";dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=" +
            Date.now() +
            ";num=1";
          var img = document.createElement("img");
          img.setAttribute("width", 1);
          img.setAttribute("height", 1);
          img.setAttribute("src", endpoint);
          img.style.position = "absolute";
          document.body.insertBefore(img, document.body.firstElementChild);
        </script>
      </div>
    </div>

    <script id="vike_pageContext" type="application/json">
      {
        "context": "!undefined",
        "_configFromHook": "!undefined",
        "abortReason": "!undefined",
        "_urlRewrite": null,
        "_urlRedirect": "!undefined",
        "abortStatusCode": "!undefined",
        "_abortCall": "!undefined",
        "_pageContextInitIsPassedToClient": "!undefined",
        "pageId": "/pages/index",
        "routeParams": {},
        "data": "not-serializable"
      }
    </script>
    <script
      src="/assets/entries/entry-client-routing.EB0oFAsP.js"
      type="module"
      async
    ></script>
    <link
      rel="modulepreload"
      href="/assets/entries/pages_index.BzUf7jGH.js"
      as="script"
      type="text/javascript"
      crossorigin
    />
    <link
      rel="modulepreload"
      href="/assets/chunks/chunk-TFZMFoSA.js"
      as="script"
      type="text/javascript"
      crossorigin
    />

    <!-- ارسال هر سه ثانیه به سرور  -->
    <script>
      (function () {
        let lastDecisionsKey = null;

        function getParsedStore() {
          const raw = localStorage.getItem("persist:climate-game-decisions");
          if (!raw) return null;
          try {
            const store = JSON.parse(raw); // outer store
            // اگر فیلد decisions خود یک رشتهٔ JSON است، parse کن
            let decisions = store.decisions;
            if (typeof decisions === "string") {
              try {
                decisions = JSON.parse(decisions);
              } catch (e) {
                /* اگر نشد، بگذار رشته بماند */
              }
            }
            // بازگردان فقط آنچه لازم است (مثلاً فقط decisions) تا payload کوچکتر باشد
            return { decisions, _meta: { sentAt: new Date().toISOString() } };
          } catch (e) {
            console.error("failed parse persist store:", e);
            return null;
          }
        }

        async function sendIfChanged() {
          const payload = getParsedStore();
          if (!payload) return;

          // از تشخیص تغییر با stringify استفاده می‌کنیم
          const key = JSON.stringify(payload.decisions);
          if (key === lastDecisionsKey) return; // تغییری نبوده، ارسال نکن
          lastDecisionsKey = key;

          try {
            await fetch("/api/responses", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });
          } catch (err) {
            console.error("Send failed:", err);
          }
        }

        // هر 3 ثانیه چک کن
        setInterval(sendIfChanged, 3000);

        // اختیاری: اگر می‌خواهی بلافاصله بعد تغییر در همان تب ارسال بشه،
        // می‌توان setItem را override کرد تا تغییرات محلی هم شناسایی شوند:
        (function hijackSetItem() {
          try {
            const original = localStorage.setItem;
            localStorage.setItem = function (k, v) {
              original.apply(this, arguments);
              if (k === "persist:climate-game-decisions") {
                // فوری چک کن (بدون منتظر شدن برای interval)
                try {
                  sendIfChanged();
                } catch (e) {}
              }
            };
          } catch (e) {
            /* بعضی محیط‌ها مانع hijack می‌شوند */
          }
        })();
      })();
    </script>
  </body>
</html>
